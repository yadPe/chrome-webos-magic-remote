{
  const enable = !window.__MR_EXTENSION__enabled;

  activateMagic(enable);

  const result = activateMagic(enable);

  if (result === true) {
    window.__MR_EXTENSION__enabled = enable;
    document.body.style.cursor = enable
      ? `url('data:image/x-icon;base64,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'), auto`
      : "auto";
    chrome.runtime.sendMessage({ enable });
  }
}

function activateMagic(shouldEnable) {
  return document.dispatchEvent(
    new CustomEvent("cursorStateChange", {
      detail: { visibility: shouldEnable },
    })
  );
}
